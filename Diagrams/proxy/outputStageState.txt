@startuml

[*] --> OUTPUT_IDLE
[*] --> INPUT_RECEIVING

OUTPUT_IDLE: ready for sending
OUTPUT_SENDING: packet is being sent
OUTPUT_WAITING_ACK: waiting for ack
OUTPUT_WAITING_ACK_WHILE_SENDING: sending packet while waiting for ack

INPUT_RECEIVING: ready for incoming data
INPUT_ACKNOWLEDGING: trying to send ack

OUTPUT_IDLE --> OUTPUT_SENDING: Acknowledge INPUT
OUTPUT_SENDING --> OUTPUT_IDLE: ACK packet is delivered
OUTPUT_IDLE --> OUTPUT_SENDING: Send DATA packet
OUTPUT_SENDING --> OUTPUT_WAITING_ACK: DATA packet is delivered
OUTPUT_WAITING_ACK --> OUTPUT_SENDING: ACK timeout
OUTPUT_WAITING_ACK --> OUTPUT_WAITING_ACK_WHILE_SENDING: Acknowledge INPUT
OUTPUT_WAITING_ACK_WHILE_SENDING --> OUTPUT_WAITING_ACK: ACK packet is delivered
OUTPUT_WAITING_ACK --> OUTPUT_IDLE: OnAcknowledgment
OUTPUT_WAITING_ACK_WHILE_SENDING --> OUTPUT_SENDING: OnAcknowledgment

INPUT_RECEIVING --> INPUT_ACKNOWLEDGING: DATA pakcet arrive
INPUT_RECEIVING --> INPUT_RECEIVING: ACK packet arrive
INPUT_ACKNOWLEDGING --> INPUT_RECEIVING: send ACK packet

@enduml
